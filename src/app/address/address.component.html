<fieldset
  [formGroupName]="controlKey"
  class="border rounded p-5 flex flex-col gap-y-3"
>
  <legend class="text-xl font-semibold">{{ label }}</legend>

  <div class="form-field flex flex-col gap-y-2">
    <label for="streetAddress" class="text-xl font-medium"
      >Street Address</label
    >
    <input
      type="text"
      formControlName="streetAddress"
      id="streetAddress"
      class="border rounded"
    />
    <div *ngIf="streetAddressInvalid" class="error-message">
      <span
        *ngIf="
          parentFormGroup
            .get(controlKey + '.streetAddress')
            ?.hasError('required')
        "
        class="text-rose-500"
        >Street Address is required!</span
      >
    </div>
  </div>

  <div class="form-field flex flex-col gap-y-2">
    <label for="city" class="text-xl font-medium">City</label>
    <input
      type="text"
      formControlName="city"
      id="city"
      class="border rounded"
    />
    <div *ngIf="cityInvalid" class="error-message">
      <span
        *ngIf="parentFormGroup.get(controlKey + '.city')?.hasError('required')"
        class="text-rose-500"
        >City is required!</span
      >
    </div>
  </div>

  <div class="form-field flex flex-col gap-y-2">
    <label for="state" class="text-xl font-medium">State</label>
    <input
      type="text"
      formControlName="state"
      id="state"
      class="border rounded"
    />
    <div *ngIf="stateInvalid" class="error-message">
      <span
        *ngIf="parentFormGroup.get(controlKey + '.state')?.hasError('required')"
        class="text-rose-500"
        >State is required!</span
      >
    </div>
  </div>

  <div class="form-field flex flex-col gap-y-2">
    <label for="zipCode" class="text-xl font-medium">Zip Code</label>
    <input
      type="number"
      formControlName="zipCode"
      id="zipCode"
      class="border rounded"
    />
    <div *ngIf="zipCodeInvalid" class="error-message">
      <span
        *ngIf="
          parentFormGroup.get(controlKey + '.zipCode')?.hasError('required')
        "
        class="text-rose-500"
        >Zip Code is required!</span
      >
      <span
        *ngIf="
          parentFormGroup.get(controlKey + '.zipCode')?.hasError('pattern')
        "
        class="text-rose-500"
        >Invalid Zip Code format!</span
      >
    </div>
  </div>
</fieldset>
